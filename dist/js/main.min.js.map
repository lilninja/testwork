{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.min.js","sourcesContent":["$(function() {\r\n\r\n// CREATE SELECT OPTIONS\r\n\r\n\r\n// var amenities = {};\r\n$(\".lable-checkbox\")\r\n.each(function(index, item){\r\n  // amenities[$(item).attr(\"for\")] = $(item).text();\r\n  $(\"#select-state\").append($(\"<option>\", { value: $(item).attr(\"for\"), text: $(item).text()}));\r\n});\r\n\r\n\r\n// DROPDOWN\r\n\r\n\r\n$(\".dropdown-item\").hide();\r\n\r\n$(\".has-dropdown\").click(function(){\r\n  $(this)\r\n  .parent()\r\n  .find($(\".dropdown-btn\"))\r\n  .toggleClass(\"dropdown-btn--active\");\r\n  $(this)\r\n  .parent()\r\n  .find($(\".dropdown-item\"))\r\n  .toggle(\"slow\");\r\n});\r\n\r\n$(\".has-dropdown-title\").click(function(){\r\n  $(this)\r\n  .parent()\r\n  .find($(\".dropdown-btn\"))\r\n  .toggleClass(\"dropdown-btn--active\");\r\n  $(this)\r\n  .parent()\r\n  .find($(\".dropdown-title\"))\r\n  .toggle(\"slow\");\r\n});\r\n\r\n//CATALOG TABS\r\n\r\n$(\".catalog__tab--map\").click(function(){\r\n  $(\".catalog__tab\").removeClass(\"catalog__tab--active\");\r\n  $(this).addClass(\"catalog__tab--active\");\r\n  $(\"#apartmens\").removeClass(\"catalog__toggle--active\");\r\n  $(\"#map\").addClass(\"catalog__toggle--active\");\r\n})\r\n\r\n$(\".catalog__tab--list\").click(function(){\r\n  $(\".catalog__tab\").removeClass(\"catalog__tab--active\");\r\n  $(this).addClass(\"catalog__tab--active\");\r\n  $(\"#map\").removeClass(\"catalog__toggle--active\");\r\n  $(\"#apartmens\").addClass(\"catalog__toggle--active\");\r\n})\r\n\r\n// CATALOG TAGS\r\n\r\nfunction showTag($value, $text){\r\n  var $tag = $(\"<div></div>\")\r\n  .text($text.text().slice(0,-1))\r\n  .addClass('item')\r\n  .attr(\"data-value\",$value);\r\n\r\n  $tag.data(\"value\", $value);\r\n  var $remove = $(\"<a></a>\")\r\n  .text(\"×\")\r\n  .addClass(\"remove tagfield__remove\")\r\n  .attr(\"href\", \"javascript:void(0)\");\r\n\r\n  $('.tagfield').append($tag.append($remove));\r\n};\r\n\r\nfunction removeTag($value){\r\n  $(\".tagfield\").find($(\"[data-value=\"+$value+\"]\")).remove();\r\n};\r\n\r\n$(document).on('click', '.tagfield__remove', function(){ selectize.removeItem($(this).parent().data('value')); \r\n});\r\n\r\n\r\nvar select = $('#select-state').selectize({\r\n  plugins: [\"remove_button\"],\r\n  maxItems: 500,\r\n  placeholder: \"enter the names of amenities that you need in apartment\",\r\n  onItemAdd: function (value, $item) {\r\n      // $(\"#\" + value).prop( \"checked\", true );\r\n      $(\"#\" + value).trigger(\"click\");\r\n      showTag(value, $item);\r\n    },\r\n  onItemRemove: function (value) {\r\n      // $(\"#\" + value).prop( \"checked\", false );\r\n      $(\"#\" + value).trigger(\"click\");\r\n      removeTag(value);\r\n  }\r\n});\r\nvar selectize = select[0].selectize;\r\n\r\n\r\n$(\".lable-checkbox\").click(function(){\r\n    var $value = $(this).attr(\"for\");\r\n  if($(this).prev().is(':checked')){\r\n    selectize.removeItem($value);\r\n     $(this).prev().prop( \"checked\", true);\r\n\r\n  }else{\r\n    selectize.addItem($value);\r\n    $(this).prev().prop( \"checked\", false);\r\n  }\r\n\r\n});\r\n\r\n\r\n//SCROLLBAR\r\n\r\n$(\".catalog__list\").perfectScrollbar(); \r\n$(\".amenities\").perfectScrollbar();\r\n$(\".selectize-dropdown-content\").perfectScrollbar();\r\n\r\n//DATA\r\n\r\n\r\n var apartments = [\r\n  {\r\n    \"name\": \"Stylish apartment in el born\",\r\n    \"img\": \"img/Stylish_apartment_in_el_born.jpg\",\r\n    \"coordinates\": {\"latitude\": 41.393592,\"longitude\": 2.1625704},\r\n    \"value\": 85,\r\n    \"amenities\": [\r\n      \"Guarded parking\",\r\n      \"Balcony\",\r\n      \"Dishwasher\",\r\n      \"Freezer\"\r\n    ]\r\n  },\r\n  {\r\n    \"name\": \"A cozy flat near Las Ramblas\",\r\n    \"img\": \"img/A_cozy_flat_near_Las_Ramblas.jpg\",\r\n    \"coordinates\": {\"latitude\": 41.394195,\"longitude\": 2.164844},\r\n    \"value\": 70,\r\n    \"amenities\": [\r\n      \"Free wireless internet\",\r\n      \"Fireplace\"\r\n    ]\r\n  },\r\n  {\r\n    \"name\": \"Apartment in the classic Barcelona center\",\r\n    \"img\": \"img/apartment_in_the_classic_barcelona_center.jpg\",\r\n    \"coordinates\": {\"latitude\": 41.393732,\"longitude\": 2.165551},\r\n    \"value\": 60,\r\n    \"amenities\": [\r\n      \"Air conditioner\",\r\n      \"Elevator\",\r\n      \"Terrace\",\r\n      \"Blender\",\r\n      \"Fridge\"\r\n    ]\r\n  },\r\n   {\r\n    \"name\": \"Classic Eixample place for rent\",\r\n    \"img\": \"img/Classic_Eixample_place_for_rent.jpg\",\r\n    \"coordinates\": {\"latitude\": 41.392794,\"longitude\": 2.164888},\r\n    \"value\": 75,\r\n    \"amenities\": [\r\n      \"Free Transportation\",\r\n      \"Guarded parking\",\r\n      \"Game room\"\r\n    ]\r\n  },\r\n   {\r\n    \"name\": \"Atlantida Beach\",\r\n    \"img\": \"img/Atlantida_Beach.jpg\",\r\n    \"coordinates\": {\"latitude\": 41.392876,\"longitude\": 2.163260},\r\n    \"value\": 90,\r\n    \"amenities\": [\r\n      \"Cooking hob\"\r\n    ]\r\n  },\r\n   {\r\n    \"name\": \"Elegant place in Eixample\",\r\n    \"img\": \"img/Elegant_place_in_Eixample.jpg\",\r\n    \"coordinates\": {\"latitude\":41.394479,\"longitude\":2.163797},\r\n    \"value\": 150,\r\n    \"amenities\": [\r\n      \"Air conditioner\",\r\n      \"Computer\",\r\n      \"Free wireless internet\",\r\n      \"Game room\",\r\n      \"Terrace\",\r\n      \"Fridge\"\r\n    ]\r\n  },\r\n ];\r\n\r\n\r\n// MAP\r\nvar pinIcon = L.icon({\r\n    iconUrl: 'img/pin.png',\r\n\r\n    iconSize:     [40, 48],\r\n    iconAnchor:   [20, 0], \r\n    popupAnchor:  [-3, 0] \r\n});\r\n\r\nvar markers = L.markerClusterGroup(\r\n  { \r\n    iconCreateFunction: function (cluster) {\r\n        var markers = cluster.getAllChildMarkers();\r\n        var html = '<div class=\"cluster-icon\">' + markers.length + '</div>';\r\n        return L.divIcon({ html: html, className: 'mycluster', iconSize: L.point(32, 32) });\r\n    },\r\n    spiderfyOnMaxZoom: false, showCoverageOnHover: true, zoomToBoundsOnClick: false \r\n}\r\n);\r\n\r\n//FILTER\r\n\r\nvar afterFilter = function(result) {\r\n   $('#total_apartmens').text(result.length);\r\n   setMarkers(result);\r\n}\r\n\r\nafterFilter(apartments);\r\n\r\n var FJS = FilterJS(apartments, '#apartmens', {\r\n  template: '#apartment-template',\r\n  filter_on_init: true,\r\n  callbacks: {\r\n    afterFilter: afterFilter\r\n   }\r\n});\r\nFJS.addCriteria({field: 'amenities', ele: '.amenities input:checkbox',event: 'change', all: 'all'});\r\n\r\n\r\n\r\n//MAP\r\n\r\nmymap.setView([41.393592, 2.162570], 17);\r\n\r\nvar pinIcon = L.icon({\r\n    iconUrl: 'img/pin.png',\r\n    iconSize:     [40, 48],\r\n    iconAnchor:   [20, 0], \r\n    popupAnchor:  [-3, 0] \r\n});\r\n\r\n\r\nfunction setMarkers(apartments){\r\n\r\n  markers.clearLayers();\r\n\r\n $.each(apartments, function(){\r\n   markers.addLayer(L.marker([this.coordinates.latitude, this.coordinates.longitude], {icon: pinIcon})\r\n    .bindPopup(\"\" + this.name)\r\n    .bindTooltip(\"€\" + this.value, \r\n    {\r\n        permanent: true,\r\n        direction: 'center'\r\n    })\r\n    .openPopup());\r\n  });\r\nmymap.addLayer(markers);\r\n\r\n};\r\n\r\n\r\n\r\n});\r\n"]}